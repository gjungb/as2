/* 
 * Generated by ASDT 
*/ /*
klasse:			OpenAMFConnector
autor: 			gerd jungbluth, adgame-wonderland
email:			gerd.jungbluth@adgame-wonderland.de
kunde:			agw
erstellung: 		25.05.2005
zuletzt bearbeitet:	25.05.2005
durch			gj
status:			in bearbeitung
*/

import mx.remoting.debug.NetDebug;
import mx.remoting.Service;
import mx.remoting.PendingCall;
import mx.rpc.RelayResponder;
import mx.rpc.FaultEvent;
import mx.rpc.ResultEvent;

import com.adgamewonderland.blaupunkt.dtmracing.remoting.*;

class com.adgamewonderland.blaupunkt.dtmracing.remoting.RacingConnector extends RemotingConnector {
	
	private static var myGatewayURL:String = "http://192.168.0.27:8080/TestServlet/gateway";
	
	private static var myRemoteObject:String = "com.agw.blaupunkt.dtmracing.remoting.RacingConnector";
	
	private static var myService:Service;
	
	public static function testLoadCar(id:Number, caller:Object, callback:String ):Void
	{
		// service
		var service:Service = getService();
		// auto laden
		var pc:PendingCall = service.loadCar(id);
		// rueckgabe von rmi auswerten
		pc.responder = new RelayResponder(caller, callback, "onConnectorFault");
	}
	
	public static function testSaveCar(car:Car, caller:Object, callback:String ):Void
	{
		// service
		var service:Service = getService();
		// auto speichern
		var pc:PendingCall = service.saveCar(car);
		// rueckgabe von rmi auswerten
		pc.responder = new RelayResponder(caller, callback, "onConnectorFault");
	}
	
//	private static function getService():Service
//	{
//		// testen, ob service schon instantiiert
//		if (myService instanceof Service == false) {
//			// debugger
//			NetDebug.initialize();
//			// offline / online
//			if (_url.indexOf("http://") == -1) {
//				// remoting service mit url
//				myService = new Service(myGatewayURL, null, myRemoteObject, null, null);
//			} else {
//				// remoting service ohne url
//				myService = new Service("", null, myRemoteObject, null, null);
//			}
//		}
//		// zurueck geben
//		return myService;
//	}
}