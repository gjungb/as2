/*klasse:			LoginUIautor: 			gerd jungbluth, adgamewonderlandemail:			gerd.jungbluth@adgamewonderland.dekunde:			skandiaerstellung: 		08.02.2005zuletzt bearbeitet:	14.02.2005durch			gjstatus:			final*/import mx.rpc.ResultEvent;import mx.rpc.FaultEvent;import mx.remoting.RecordSet;import com.adgamewonderland.skandia.akademietool.editor.*;class com.adgamewonderland.skandia.akademietool.editor.LoginUI extends MovieClip {		private var myEditorUI:EditorUI;		private var nickname_txt:TextField;		private var login_btn:Button;		public function LoginUI()	{		// editor		myEditorUI = EditorUI(_parent);		// default text fuer eingabefeld nickname		nickname_txt.text = nickname_txt.defaultText = "Ihr Kürzel"; 		// beim betreten ggf. leeren 		nickname_txt.onSetFocus = function () { 			// leeren, wenn default 			if (this.text == this.defaultText) this.text = "";	 		}; 		// beim verlassen ggf. default nehmen		nickname_txt.onKillFocus = function() {			// wenn leer, default			if (this.text == "") this.text = this.defaultText;		};		// auf sechs zeichen begrenzen		nickname_txt.maxChars = 6;		// nur buchstaben		nickname_txt.restrict = "a-z";	 	// button login	 	login_btn.onRelease = function () {	 		this._parent.sendLogin();		 	};	}		public function sendLogin():Void	{		// texten, ob genau sechs zeichen		if (nickname_txt.text.length != 6) {			return;		}		// button ausblenden		login_btn._visible = false;		// userdaten laden lassen		EditorConnector.loadUser(nickname_txt.text, this, "onUserLoaded");		// loader anzeigen		myEditorUI.showLoader(true, "Kürzel wird überprüft");	}		public function onUserLoaded(re:ResultEvent ):Void	{		// loader ausblenden		myEditorUI.showLoader(false);		// userdaten als resultset		var userdata:RecordSet = RecordSet(re.result);		// testen, ob user gefunden		if (userdata.length != 1) {			// button einblenden			login_btn._visible = true;			return;			}		// beschreibung des users		var description:Object = userdata.getItemAt(0);		// neuer user		var user:User = new User();		// user id aus datenbank		user.userid = description.USERID;		// nickname 6stellig		user.nickname = description.NICKNAME;		// name		user.name = description.NAME;		// email		user.email = description.EMAIL;		// einloggen		myEditorUI.loginUser(user);	}		public function onConnectorFault(fe:FaultEvent ):Void	{   		trace("There was a problem: " + fe.fault.faultstring);	   	trace("The faultcode is: " + fe.fault.faultcode);	 	trace("The detail: " + fe.fault.detail);	   	trace("The error class name is: " + fe.fault.type);	}	} /* end class LoginUI */