/*klasse:			RemotingContentLoaderautor: 			gerd jungbluth, adgame-wonderlandemail:			gerd.jungbluth@adgame-wonderland.dekunde:			skandiaerstellung: 		16.12.2004zuletzt bearbeitet:	28.01.2005durch			gjstatus:			final*/import mx.remoting.Service;import mx.remoting.PendingCall;import mx.rpc.RelayResponder;import mx.rpc.FaultEvent;import mx.rpc.ResultEvent;import com.adgamewonderland.skandia.akademietool.interfaces.*;import com.adgamewonderland.skandia.akademietool.loaders.*;class com.adgamewonderland.skandia.akademietool.loaders.RemotingContentLoader extends RemotingLoader implements IContentLoader {	// Attributes		// Operations		// konstruktor	public function RemotingContentLoader()	{		// eigenschaften des RemotingLoader		super();	}		public function addConsumer(con:IContentConsumer ):Void	{		// neuer consumer		myConsumers.push(con);	}		public function loadContent():Void	{		// content laden		var pc:PendingCall = myService.getContent(myLoadParams["numtasks"], myLoadParams["difficulty"], myLoadParams["topic"]);		// rueckgabe von rmi auswerten		pc.responder = new RelayResponder(this, "onContentLoaded", "getContent_Fault");	}		public function onContentLoaded(re:ResultEvent ):Void	{		// content object		var content:QuizContent = new QuizContent();		// geladener content (als QuizContentBean)		var infos:Object = re.result;		// aufgaben (als QuizContentTaskBeans)		var tasks:Array = infos.tasks;		// schleife ueber alle aufgaben		for  (var i:String in tasks) {			// abbildung zur aufgabe			var taskimage:QuizContentImage = new QuizContentImage(tasks[i].image.src, tasks[i].image.width, tasks[i].image.height);			// abbildung zur erklaerung			var explanationimg:QuizContentImage = new QuizContentImage(tasks[i].explanationimg.src, tasks[i].explanationimg.width, tasks[i].explanationimg.height);			// task object			var task:QuizContentTask = new QuizContentTask(tasks[i].tid, tasks[i].difficulty, tasks[i].question, taskimage, tasks[i].explanation, explanationimg);			// antworten			var answers:Array = tasks[i].answers;			// schleife ueber alle antworten (als ContentAnswerBeans)			for (var j:String in answers) {				// answer object				var answer:QuizContentAnswer = new QuizContentAnswer(answers[j].text, answers[j].correct);				// zur task hinzufuegen				task.addAnswer(answer);			}			// zum content hinzufuegen			content.addTask(task);		}		// consumer informieren		for (var i:String in myConsumers) myConsumers[i].setContent(content);	}		public function getContent_Fault(fe:FaultEvent):Void	{	}	} /* end class RemotingContentLoader */