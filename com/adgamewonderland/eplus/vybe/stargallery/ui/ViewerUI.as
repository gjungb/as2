import mx.utils.Delegate;import com.adgamewonderland.eplus.vybe.stargallery.beans.Artist;import com.adgamewonderland.eplus.vybe.stargallery.beans.Photo;import com.adgamewonderland.eplus.vybe.stargallery.controllers.GalleryController;import com.adgamewonderland.eplus.vybe.stargallery.interfaces.IGalleryListener;/** * @author gerd */class com.adgamewonderland.eplus.vybe.stargallery.ui.ViewerUI extends MovieClip implements IGalleryListener {	private static var PHOTOX:Number = 12;	private static var PHOTOY:Number = 167;	private static var PHOTOSCALE:Number = 100;	private var photo_mc:MovieClip;	private var loader_mc:MovieClip;	private var download_mc:MovieClip;	private var artist_txt:TextField;	private var photographer_txt:TextField;	public function ViewerUI() {	}	public function onLoad():Void	{		// als listener registrieren		GalleryController.getInstance().addListener(this);		// photo		photo_mc = this.createEmptyMovieClip("photo_mc", 1);		// positionieren		photo_mc._x = PHOTOX;		photo_mc._y = PHOTOY;		// loader ausblenden		loader_mc._visible = false;		// download		download_mc.onRelease = Delegate.create(this, doDownload);		// zufaelliges photo eines zufaelligen kuenstlers		GalleryController.getInstance().selectPhoto(GalleryController.getInstance().getRandomPhoto());	}	public function onUnload():Void	{		// als listener deregistrieren		GalleryController.getInstance().removeListener(this);	}	public function onArtistSelected(artist:Artist ):Void	{	}	public function onPhotoSelected(photo:Photo ):Void	{		// kuenstlername		artist_txt.text = photo.getArtist().getName();		// photographenname		if(photo.getPhotographer() != "") {			photographer_txt.text = "Foto: " + photo.getPhotographer();		} else {			photographer_txt.text = "";		}		// photo laden		loadPhoto(photo.getFilenameUrl());	}	public function doDownload():Void	{		// downloaden		getURL(GalleryController.getInstance().getPhotoURL(), "_blank");	}	/**	 * callback nach laden des photos	 */	public function onLoadComplete(target_mc:MovieClip, status:Number ):Void	{		// photo skalieren		photo_mc._xscale = photo_mc._yscale = PHOTOSCALE;		// einblenden		photo_mc._visible = true;		// loader ausblenden		loader_mc._visible = false;	}	/**	 * photo laden	 */	private function loadPhoto(url:String ):Void	{		// ausblenden		photo_mc._visible = false;		// loader einblenden		loader_mc._visible = true;		// platzhalter zum nachladen		var dummy_mc:MovieClip = photo_mc.createEmptyMovieClip("dummy_mc", 1);		// loader		var mcl:MovieClipLoader = new MovieClipLoader();		// als listener registrieren		mcl.addListener(this);		// laden		mcl.loadClip(url, dummy_mc);	}}