/* 
 * Generated by ASDT 
*/ 

/*
klasse:			TimelineFollower
autor: 			gerd jungbluth, adgame-wonderland
email:			gerd.jungbluth@adgame-wonderland.de
kunde:			agw
erstellung: 		08.06.2005
zuletzt bearbeitet:	09.06.2005
durch			gj
status:			in bearbeitung
*/

class com.adgamewonderland.agw.util.TimelineFollower {
	
	private var myCaller:MovieClip;
	
	private var myCallback:String;
	
	private var myArgument:Object;
	
	private var myLastFrame:Number;
	
	public function TimelineFollower(caller:MovieClip, callback:String, argument:Object )
	{
		// caller
		myCaller = caller;
		// callback
		myCallback = callback;
		// argument
		myArgument = argument;
		// frame, in dem sich caller zuletzt befunden hat (um stop() zu bemerken)
		myLastFrame = caller._currentframe;
	}
	
	public function followTimeline():Void
	{
		// stop() erreicht
		if (myCaller._currentframe - myLastFrame == 0) {
			// verfolgen beenden
			delete (myCaller.onEnterFrame);
			// callback ausfuehren
			myCaller[myCallback](myArgument);
		}
		// lastframe aktualisieren
		myLastFrame = myCaller._currentframe;
	}
}