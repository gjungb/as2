/* 
 * Generated by ASDT 
*/ 

/*
klasse:			VehicleUser
autor: 			gerd jungbluth, adgame-wonderland
email:			gerd.jungbluth@adgame-wonderland.de
kunde:			agw
erstellung: 		19.05.2005
zuletzt bearbeitet:	07.06.2005
durch			gj
status:			in bearbeitung
*/

import com.adgamewonderland.agw.math.*;

import com.adgamewonderland.agw.racing.vehicle.*;

class com.adgamewonderland.agw.racing.vehicle.VehicleUI extends MovieClip {
	
	private static var SHADOWDIFF:Object = {x : 2, y : 2};
	
	private var myVehicle:Vehicle;
	
	private var color_mc:MovieClip;
	
	private var shadow_mc:MovieClip;
	
	public function VehicleUI()
	{
		// fahrzeug
		myVehicle = null;
		
		_xscale = _yscale = 100;
	}
	
	public function initVehicleUI(vobj:Vehicle, carid:Number ):Void
	{
		// fahrzeug
		myVehicle = vobj;
		// je nach typ farbe anzeigen
		color_mc.gotoAndStop(vobj.type);
		// modell anzeigen
		gotoAndStop(carid);
	}
	
	public function setPosition(point:Point ):Void
	{
		// auf buehne positionieren
		_x = point.x;
		_y = point.y;
	}
	
	public function setRotation(angle:Number ):Void
	{
		// auf buehne drehen
		_rotation = angle;
		// schatten positionieren
		updateShadow();
	}
	
	private function updateShadow():Void
	{
		// position des fahrzeugs
		var pos:Object = {x : myVehicle.position.x, y : myVehicle.position.y};
		// in globale koordinaten relativ zur anzeige der strecke
		_parent.localToGlobal(pos);
		// schatten daneben
		pos.x += SHADOWDIFF.x;
		pos.y += SHADOWDIFF.y;
		// in lokale koordinaten
		globalToLocal(pos);
		// positionieren
		shadow_mc._x = pos.x;
		shadow_mc._y = pos.y;
	}
}